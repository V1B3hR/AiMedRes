# AiMedRes Healthcare Deployment Environment Configuration
# Copy this file to .env and fill in the values
# IMPORTANT: Never commit .env file with real credentials to version control

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=aimedres_production
POSTGRES_USER=aimedres_admin
POSTGRES_PASSWORD=CHANGE_ME_SECURE_PASSWORD_HERE
POSTGRES_PORT=5432

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# =============================================================================
# OBJECT STORAGE (MinIO/S3)
# =============================================================================
MINIO_ROOT_USER=aimedres_admin
MINIO_ROOT_PASSWORD=CHANGE_ME_SECURE_PASSWORD_HERE
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# S3-compatible storage settings
MINIO_REGION=us-east-1
MINIO_BUCKET_PREFIX=aimedres

# =============================================================================
# REDIS CACHE (Optional)
# =============================================================================
REDIS_PASSWORD=CHANGE_ME_SECURE_PASSWORD_HERE
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_TTL=3600

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
ENVIRONMENT=production
LOG_LEVEL=INFO
DEBUG=false

# Application ports
APP_PORT=8000
ADMIN_PORT=8001
HEALTH_PORT=8002

# =============================================================================
# SECURITY & ENCRYPTION
# =============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_64_CHAR_STRING
ENCRYPTION_KEY=CHANGE_ME_GENERATE_RANDOM_64_CHAR_STRING

# JWT settings
JWT_SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_64_CHAR_STRING
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# Session settings
SESSION_SECRET_KEY=CHANGE_ME_GENERATE_RANDOM_64_CHAR_STRING
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# =============================================================================
# QUANTUM-SAFE CRYPTOGRAPHY
# =============================================================================
ENABLE_QUANTUM_CRYPTO=true
QUANTUM_ALGORITHM=kyber768
HYBRID_ENCRYPTION=true

# Key rotation settings (in days)
KEY_ROTATION_DAYS=90
AUTO_KEY_ROTATION=true

# =============================================================================
# HIPAA COMPLIANCE SETTINGS
# =============================================================================
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years as per HIPAA
ENABLE_PHI_SCRUBBING=true
ENABLE_ENCRYPTION_AT_REST=true
ENABLE_ENCRYPTION_IN_TRANSIT=true

# Minimum necessary access controls
ENABLE_RBAC=true
ENABLE_DATA_MINIMIZATION=true

# =============================================================================
# GDPR COMPLIANCE SETTINGS
# =============================================================================
ENABLE_GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=2555
ENABLE_RIGHT_TO_ERASURE=true
ENABLE_DATA_PORTABILITY=true

# Cookie consent and tracking
COOKIE_CONSENT_REQUIRED=true
ANONYMIZE_IP_ADDRESSES=true

# =============================================================================
# PHI/PII PROTECTION
# =============================================================================
PHI_SCRUBBING_LEVEL=high  # Options: low, medium, high
PHI_DETECTION_CONFIDENCE_THRESHOLD=0.85
ENABLE_DEIDENTIFICATION=true

# PHI fields to scrub (comma-separated)
PHI_FIELDS_TO_SCRUB=name,ssn,email,phone,address,dob,mrn

# =============================================================================
# AUTHENTICATION & AUTHORIZATION
# =============================================================================
# LDAP/Active Directory integration
ENABLE_LDAP_AUTH=false
LDAP_SERVER_URL=ldap://your-ldap-server.example.com:389
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=CHANGE_ME
LDAP_USER_SEARCH_BASE=ou=users,dc=example,dc=com
LDAP_GROUP_SEARCH_BASE=ou=groups,dc=example,dc=com

# Single Sign-On (SSO) SAML 2.0
ENABLE_SAML_SSO=false
SAML_IDP_URL=https://your-idp.example.com/saml
SAML_SP_ENTITY_ID=aimedres-production
SAML_CERT_PATH=/app/config/saml/cert.pem
SAML_KEY_PATH=/app/config/saml/key.pem

# Multi-Factor Authentication
ENABLE_MFA=true
MFA_METHODS=totp,sms,email
MFA_REQUIRED_FOR_ADMIN=true

# =============================================================================
# MLFLOW EXPERIMENT TRACKING
# =============================================================================
MLFLOW_PORT=5001
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_ARTIFACT_LOCATION=s3://mlflow-artifacts
MLFLOW_EXPERIMENT_NAME=aimedres-production

# =============================================================================
# API RATE LIMITING & SECURITY
# =============================================================================
ENABLE_RATE_LIMITING=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# API security
API_KEY_HEADER_NAME=X-API-Key
REQUIRE_API_KEY=true
ENABLE_CORS=true
CORS_ALLOWED_ORIGINS=https://your-frontend.example.com

# =============================================================================
# MEDICAL IMAGING SETTINGS
# =============================================================================
IMAGING_DATA_DIR=/app/data/imaging
IMAGING_OUTPUT_DIR=/app/outputs/imaging
IMAGING_TEMP_DIR=/tmp/imaging
ENABLE_DICOM_SUPPORT=true
ENABLE_NIFTI_SUPPORT=true

# Image processing limits
MAX_IMAGE_SIZE_MB=500
MAX_UPLOAD_SIZE_MB=1000

# =============================================================================
# MODEL DEPLOYMENT & INFERENCE
# =============================================================================
MODEL_SERVING_TIMEOUT=30
MODEL_CACHE_SIZE_GB=10
ENABLE_MODEL_VERSIONING=true
DEFAULT_MODEL_VERSION=latest

# GPU settings (if available)
ENABLE_GPU=false
GPU_DEVICE_ID=0
GPU_MEMORY_FRACTION=0.8

# =============================================================================
# MONITORING & ALERTING
# =============================================================================
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090

# Log aggregation (Syslog, ELK, Splunk, etc.)
ENABLE_SYSLOG=false
SYSLOG_SERVER=syslog.example.com
SYSLOG_PORT=514

# Email alerts
ENABLE_EMAIL_ALERTS=true
SMTP_SERVER=smtp.example.com
SMTP_PORT=587
SMTP_USER=alerts@example.com
SMTP_PASSWORD=CHANGE_ME
ALERT_EMAIL_TO=admin@example.com,security@example.com

# Slack/Teams alerts
ENABLE_SLACK_ALERTS=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE_CRON=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=90
BACKUP_LOCATION=/app/backups

# Off-site backup
ENABLE_OFFSITE_BACKUP=false
OFFSITE_BACKUP_S3_BUCKET=aimedres-backups
OFFSITE_BACKUP_S3_REGION=us-west-2

# =============================================================================
# CLINICAL DECISION SUPPORT (CDS)
# =============================================================================
ENABLE_CDS=true
CDS_CONFIDENCE_THRESHOLD=0.85
ENABLE_CLINICIAN_OVERRIDE=true
REQUIRE_OVERRIDE_JUSTIFICATION=true

# Safety thresholds
ENABLE_SAFETY_CHECKS=true
ALERT_ON_LOW_CONFIDENCE=true
ALERT_ON_HIGH_RISK=true

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================
# Audit log settings
AUDIT_LOG_FORMAT=json
AUDIT_LOG_ENCRYPTION=true
AUDIT_LOG_IMMUTABLE=true
ENABLE_BLOCKCHAIN_AUDIT=false  # For immutable audit trail

# Access logging
LOG_ALL_API_REQUESTS=true
LOG_ALL_DATA_ACCESS=true
LOG_ALL_MODEL_PREDICTIONS=true

# =============================================================================
# PERFORMANCE & SCALABILITY
# =============================================================================
WORKER_PROCESSES=4
WORKER_THREADS_PER_PROCESS=2
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT_SECONDS=30

# Connection pooling
CONNECTION_POOL_SIZE=20
CONNECTION_MAX_OVERFLOW=10

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_BRAIN_MRI=true
FEATURE_ALZHEIMERS_DETECTION=true
FEATURE_PARKINSONS_DETECTION=true
FEATURE_ALS_DETECTION=true
FEATURE_CARDIOVASCULAR_RISK=true
FEATURE_DIABETES_PREDICTION=true
FEATURE_MULTI_AGENT_CONSULTATION=true
FEATURE_EXPLAINABLE_AI=true

# =============================================================================
# HOSPITAL/ORGANIZATION SETTINGS
# =============================================================================
ORGANIZATION_NAME=Your Healthcare Organization
ORGANIZATION_ID=your-org-id
SITE_ID=your-site-id
DEPLOYMENT_REGION=us-east-1

# Contact information for support
SUPPORT_EMAIL=support@example.com
SUPPORT_PHONE=+1-555-123-4567
EMERGENCY_CONTACT=emergency@example.com

# =============================================================================
# INTEGRATION ENDPOINTS
# =============================================================================
# EMR/EHR integration
EMR_SYSTEM_TYPE=epic  # Options: epic, cerner, allscripts, custom
EMR_API_ENDPOINT=https://emr.example.com/api
EMR_API_KEY=CHANGE_ME
ENABLE_HL7_INTERFACE=false
HL7_LISTENER_PORT=2575
ENABLE_FHIR_INTERFACE=true
FHIR_BASE_URL=https://fhir.example.com/r4

# PACS integration (medical imaging)
ENABLE_PACS_INTEGRATION=false
PACS_AE_TITLE=AIMEDRES
PACS_SERVER_HOST=pacs.example.com
PACS_SERVER_PORT=11112

# =============================================================================
# DEVELOPMENT/TESTING (DISABLE IN PRODUCTION)
# =============================================================================
ENABLE_DEBUG_MODE=false
ENABLE_PROFILING=false
ENABLE_SWAGGER_UI=false
ALLOW_INSECURE_HTTP=false

# Test mode settings
TEST_MODE=false
USE_TEST_DATABASE=false
SKIP_SECURITY_CHECKS=false

# =============================================================================
# CUSTOM SETTINGS
# =============================================================================
# Add your organization-specific settings below
#
# Example:
# CUSTOM_WORKFLOW_TIMEOUT=300
# CUSTOM_APPROVAL_REQUIRED=true
